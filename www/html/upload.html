<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>SERVER_NAME</title>
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="stylesheet" href="/css/upload.css">
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1">
    <script src="https://kit.fontawesome.com/cdcf7dd448.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css" integrity="sha384-Uu6IeWbM+gzNVXJcM9XV3SohHtmWE+3VGi496jvgX1jyvDTXfdK+rfZc8C1Aehk5" crossorigin="anonymous">
<!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>-->
    <script>
        function addedFile() {
            if (confirm("Selected file, would you like to upload it?")) {
                document.getElementById('formid').submit();
            }
        }
        function setup() {
            document.getElementById('buttonid').addEventListener('click', openDialog);
            function openDialog() {
                document.getElementById('fileid').click();
            }
            document.getElementById('fileid').addEventListener('change', addedFile);
        }
        function loadFile(event) {
            const output = document.getElementById('output');
            output.src = URL.createObjectURL(event.target.files[0]);
            output.onload = function() {
                URL.revokeObjectURL(output.src) // free memory
            }
        }
    </script>
</head>
<body onload="setup()">
<!-- setting the target to an invisible dummy_frame allows us to avoid the page being redirected without JS -->
<!--<iframe name="dummy_frame" id="dummy_frame" style="display: none;"></iframe>-->
<!--<form id='formid' action="/api/upload" method="POST" enctype="multipart/form-data" target="dummy_frame">-->
<!--    <input id='fileid' type='file' name='file' hidden/>-->
<!--    <input id='buttonid' type='button' value='Upload'/>-->
<!--    <input type='submit' value='Submit' style="display: none;"/> &lt;!&ndash; Why is this required? &ndash;&gt;-->
<!--</form>-->

<div class="pure-g">
    <div class="pure-u-1-3"></div>
    <div class="pure-u-1-3">
        <style scoped=""> /* for some reason this doesn't work outside the html */
            .round-button {
                border-radius: 5px;
                font-size: 125%;
            }
        </style>
        <div class="main-form">
        <form class="pure-form pure-form-stacked">
            <fieldset>
                <input type="file" accept="image/*" onchange="loadFile(event)" class="pure-button pure-button-primary">
                <img class="output-img" id="output"/>
<!--                <button type="submit" onchange="addedFile();" class="round-button pure-button pure-button-primary"><i class="fa fa-upload"></i> Upload</button>-->
            </fieldset>
        </form>
        </div>
    </div>
    <div class="pure-u-1-3"></div>
</div>

</body>
</html>
